# å¿«é€Ÿå¼€å§‹

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [go.mod](file://go.mod)
- [examples/utlsclient/example_basic_usage.go](file://examples/utlsclient/example_basic_usage.go)
- [examples/utlsclient/example_hotconnpool_usage.go](file://examples/utlsclient/example_hotconnpool_usage.go)
- [examples/utlsclient/example_utlsclient_usage.go](file://examples/utlsclient/example_utlsclient_usage.go)
- [cmd/utlsclient/main.go](file://cmd/utlsclient/main.go)
- [utlsclient/utlshotconnpool.go](file://utlsclient/utlshotconnpool.go)
- [utlsclient/utlsclient.go](file://utlsclient/utlsclient.go)
- [config/config.toml](file://config/config.toml)
- [utlsclient/constants.go](file://utlsclient/constants.go)
</cite>

## ç›®å½•
1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [é¡¹ç›®å…‹éš†å’Œæ„å»º](#é¡¹ç›®å…‹éš†å’Œæ„å»º)
4. [åŸºç¡€ä½¿ç”¨ç¤ºä¾‹](#åŸºç¡€ä½¿ç”¨ç¤ºä¾‹)
5. [å®Œæ•´ç«¯åˆ°ç«¯ç¤ºä¾‹](#å®Œæ•´ç«¯åˆ°ç«¯ç¤ºä¾‹)
6. [é…ç½®æ–‡ä»¶è¯¦è§£](#é…ç½®æ–‡ä»¶è¯¦è§£)
7. [å¸¸è§é—®é¢˜è§£å†³](#å¸¸è§é—®é¢˜è§£å†³)
8. [æ€§èƒ½ä¼˜åŒ–å»ºè®®](#æ€§èƒ½ä¼˜åŒ–å»ºè®®)

## é¡¹ç›®ç®€ä»‹

Crawler Platform æ˜¯ä¸€ä¸ªåŸºäº uTLS çš„é«˜æ€§èƒ½çˆ¬è™«å¹³å°ï¼Œä¸“ä¸ºéœ€è¦ä¼ªè£… TLS æŒ‡çº¹çš„ç½‘ç»œçˆ¬è™«åº”ç”¨è€Œè®¾è®¡ã€‚è¯¥é¡¹ç›®æä¾›äº†ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- **ğŸ”¥ çƒ­è¿æ¥æ± **: é¢„å»ºç«‹ TLS è¿æ¥å¹¶å¤ç”¨ï¼Œæ€§èƒ½æå‡ 3-6 å€
- **ğŸ­ TLS æŒ‡çº¹ä¼ªè£…**: æ”¯æŒ 33 ç§çœŸå®æµè§ˆå™¨æŒ‡çº¹ï¼Œæ¨¡æ‹Ÿ Chromeã€Firefoxã€Safariã€Edge ç­‰
- **ğŸŒ å¤šè¯­è¨€æ”¯æŒ**: éšæœºç”Ÿæˆ Accept-Language å¤´ï¼Œä» 90 ç§è¯­è¨€ä¸­ç»„åˆ
- **ğŸ“¡ åŒåè®®æ”¯æŒ**: è‡ªåŠ¨æ£€æµ‹ HTTP/1.1 å’Œ HTTP/2ï¼Œå®Œç¾æ”¯æŒ h2 è¿æ¥å¤ç”¨
- **ğŸŒ åŒæ ˆç½‘ç»œ**: å®Œæ•´æ”¯æŒ IPv4 å’Œ IPv6 åœ°å€
- **ğŸ”’ å®‰å…¨å¯é **: æ­»é”é¢„é˜²ã€è¿æ¥å¥åº·æ£€æŸ¥ã€è‡ªåŠ¨é‡è¯•æœºåˆ¶

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L1-L50)

## ç¯å¢ƒå‡†å¤‡

### Go ç‰ˆæœ¬è¦æ±‚

é¡¹ç›®éœ€è¦ Go 1.25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚è¯·ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒä¸­å·²å®‰è£…åˆé€‚çš„ Go ç‰ˆæœ¬ï¼š

```bash
# æ£€æŸ¥ Go ç‰ˆæœ¬
go version

# å¦‚æœç‰ˆæœ¬ä½äº 1.25ï¼Œè¯·å‡çº§ Go
# ä¸‹è½½æœ€æ–°ç‰ˆæœ¬: https://golang.org/dl/
```

### ä¾èµ–åº“

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹ä¸»è¦ä¾èµ–åº“ï¼š

- **refraction-networking/utls**: uTLS åº“ï¼Œç”¨äº TLS æŒ‡çº¹ä¼ªè£…
- **golang.org/x/net/http2**: HTTP/2 åè®®æ”¯æŒ
- **å…¶ä»–æ ‡å‡†åº“**: åŒ…å« TOMLã€DNS è§£æç­‰åŠŸèƒ½

**ç« èŠ‚æ¥æº**
- [go.mod](file://go.mod#L1-L24)

## é¡¹ç›®å…‹éš†å’Œæ„å»º

### å…‹éš†é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone https://github.com/your-repository/crawler-platform.git
cd crawler-platform
```

### å®‰è£…ä¾èµ–

```bash
# ä¸‹è½½é¡¹ç›®ä¾èµ–
go mod download
```

### æ„å»ºå‘½ä»¤è¡Œå·¥å…·

```bash
# æ„å»º utlsclient å‘½ä»¤è¡Œå·¥å…·
go build -o utlsclient cmd/utlsclient/main.go

# æˆ–è€…ç›´æ¥ä½¿ç”¨ go run è¿è¡Œ
go run cmd/utlsclient/main.go
```

### éªŒè¯å®‰è£…

```bash
# æŸ¥çœ‹å·¥å…·ç‰ˆæœ¬
./utlsclient --version

# æˆ–
go run cmd/utlsclient/main.go --version
```

## åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»º UTLSHotConnPool

ä»¥ä¸‹æ˜¯åˆ›å»ºå’Œä½¿ç”¨çƒ­è¿æ¥æ± çš„åŸºç¡€ä»£ç ï¼š

```go
package main

import (
    "net/http"
    "crawler-platform/utlsclient"
)

func main() {
    // åˆ›å»ºçƒ­è¿æ¥æ± ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
    pool := utlsclient.NewUTLSHotConnPool(nil)
    defer pool.Close()

    // è·å–è¿æ¥
    conn, err := pool.GetConnection("kh.google.com")
    if err != nil {
        panic(err)
    }
    defer pool.PutConnection(conn)

    // ä½¿ç”¨è¿æ¥å‘é€ HTTP è¯·æ±‚
    client := utlsclient.NewUTLSClient(conn)
    req, _ := http.NewRequest("GET", "https://kh.google.com/rt/earth/PlanetoidMetadata", nil)
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()

    // è¿æ¥ä¼šè‡ªåŠ¨å½’è¿˜åˆ°æ± ä¸­
}
```

### å…³é”®æ­¥éª¤è¯´æ˜

1. **åˆ›å»ºè¿æ¥æ± **: `utlsclient.NewUTLSHotConnPool(nil)` ä½¿ç”¨é»˜è®¤é…ç½®åˆ›å»ºè¿æ¥æ± 
2. **è·å–è¿æ¥**: `pool.GetConnection("hostname")` è·å–åˆ°ç›®æ ‡ä¸»æœºçš„çƒ­è¿æ¥
3. **åˆ›å»ºå®¢æˆ·ç«¯**: `utlsclient.NewUTLSClient(conn)` åŸºäºçƒ­è¿æ¥åˆ›å»º HTTP å®¢æˆ·ç«¯
4. **å‘é€è¯·æ±‚**: ä½¿ç”¨å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚
5. **å½’è¿˜è¿æ¥**: `pool.PutConnection(conn)` å°†è¿æ¥å½’è¿˜åˆ°æ± ä¸­ï¼Œä»¥ä¾¿å¤ç”¨

**ç« èŠ‚æ¥æº**
- [examples/utlsclient/example_basic_usage.go](file://examples/utlsclient/example_basic_usage.go#L1-L83)
- [README.md](file://README.md#L37-L70)

## å®Œæ•´ç«¯åˆ°ç«¯ç¤ºä¾‹

### è¯¦ç»†ä½¿ç”¨æµç¨‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç«¯åˆ°ç«¯ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ä»åˆå§‹åŒ–åˆ°å‘é€è¯·æ±‚çš„å…¨è¿‡ç¨‹ï¼š

```go
package main

import (
    "fmt"
    "io"
    "log"
    "net/http"
    "time"
    "crawler-platform/utlsclient"
)

func main() {
    // 1. åŠ è½½é…ç½®æ–‡ä»¶
    config, err := utlsclient.LoadPoolConfigFromFile("config.toml")
    if err != nil {
        log.Fatalf("åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥: %v", err)
    }

    // 2. åˆ›å»ºçƒ­è¿æ¥æ± 
    pool := utlsclient.NewUTLSHotConnPool(config)
    defer pool.Close()

    // 3. è·å–è¿æ¥å¹¶éªŒè¯
    conn, err := pool.GetConnectionWithValidation("https://kh.google.com/rt/earth/PlanetoidMetadata")
    if err != nil {
        log.Fatalf("è·å–è¿æ¥å¤±è´¥: %v", err)
    }
    defer pool.PutConnection(conn)

    // 4. åˆ›å»º UTLS å®¢æˆ·ç«¯
    client := utlsclient.NewUTLSClient(conn)
    client.SetTimeout(10 * time.Second)
    client.SetDebug(true) // å¼€å¯è°ƒè¯•æ¨¡å¼

    // 5. å‘é€ HTTP è¯·æ±‚
    resp, err := client.Get("https://kh.google.com/rt/earth/PlanetoidMetadata")
    if err != nil {
        log.Fatalf("è¯·æ±‚å¤±è´¥: %v", err)
    }
    defer resp.Body.Close()

    // 6. å¤„ç†å“åº”
    fmt.Printf("å“åº”çŠ¶æ€: %s\n", resp.Status)
    
    body, err := io.ReadAll(resp.Body)
    if err != nil {
        log.Fatalf("è¯»å–å“åº”ä½“å¤±è´¥: %v", err)
    }
    
    fmt.Printf("å“åº”ä½“é•¿åº¦: %d å­—èŠ‚\n", len(body))
    fmt.Printf("å“åº”å†…å®¹: %v\n", body)
    
    // 7. æŸ¥çœ‹è¿æ¥ç»Ÿè®¡ä¿¡æ¯
    stats := conn.Stats()
    fmt.Printf("è¿æ¥ç»Ÿè®¡:\n")
    fmt.Printf("  è¯·æ±‚æ¬¡æ•°: %d\n", stats.RequestCount)
    fmt.Printf("  é”™è¯¯æ¬¡æ•°: %d\n", stats.ErrorCount)
    fmt.Printf("  å¥åº·çŠ¶æ€: %v\n", stats.IsHealthy)
}
```

### ç¤ºä¾‹ä»£ç å…³é”®ç‚¹

1. **é…ç½®åŠ è½½**: ä» `config.toml` æ–‡ä»¶åŠ è½½è¿æ¥æ± é…ç½®
2. **è¿æ¥éªŒè¯**: ä½¿ç”¨ `GetConnectionWithValidation()` è·å–ç»è¿‡è·¯å¾„éªŒè¯çš„è¿æ¥
3. **è¶…æ—¶è®¾ç½®**: è®¾ç½®åˆç†çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆ10ç§’ï¼‰
4. **è°ƒè¯•æ¨¡å¼**: å¼€å¯è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†çš„è¯·æ±‚ä¿¡æ¯
5. **èµ„æºç®¡ç†**: ä½¿ç”¨ defer ç¡®ä¿è¿æ¥æ­£ç¡®å½’è¿˜
6. **ç»Ÿè®¡ä¿¡æ¯**: æŸ¥çœ‹è¿æ¥çš„ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯

**ç« èŠ‚æ¥æº**
- [examples/utlsclient/example_hotconnpool_usage.go](file://examples/utlsclient/example_hotconnpool_usage.go#L1-L277)
- [examples/utlsclient/example_utlsclient_usage.go](file://examples/utlsclient/example_utlsclient_usage.go#L1-L117)

## é…ç½®æ–‡ä»¶è¯¦è§£

### é»˜è®¤é…ç½®ç»“æ„

é¡¹ç›®ä½¿ç”¨ TOML æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œä½äº `config/config.toml`ï¼š

```toml
[pool]
# æœ€å¤§è¿æ¥æ•°
max_connections = 100
# æ¯ä¸ªä¸»æœºæœ€å¤§è¿æ¥æ•°
max_conns_per_host = 10
# æœ€å¤§ç©ºé—²è¿æ¥æ•°
max_idle_conns = 20
# è¿æ¥è¶…æ—¶æ—¶é—´ (ç§’)
conn_timeout = 30
# ç©ºé—²è¶…æ—¶æ—¶é—´ (ç§’)
idle_timeout = 60
# è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ (ç§’)
max_lifetime = 300
# æµ‹è¯•è¯·æ±‚è¶…æ—¶æ—¶é—´ (ç§’)
test_timeout = 10
# å¥åº·æ£€æŸ¥é—´éš” (ç§’)
health_check_interval = 30
# æ¸…ç†é—´éš” (ç§’)
cleanup_interval = 60
# é»‘åå•æ£€æŸ¥é—´éš” (ç§’)
blacklist_check_interval = 300
# DNSæ›´æ–°é—´éš” (ç§’)
dns_update_interval = 1800
# æœ€å¤§é‡è¯•æ¬¡æ•°
max_retries = 3

# å¯é€‰ï¼šç™½åå•IPåˆ—è¡¨
[whitelist]
# ips = ["1.1.1.1", "8.8.8.8"]

# å¯é€‰ï¼šé»‘åå•IPåˆ—è¡¨
[blacklist]
# ips = ["192.168.1.1", "10.0.0.1"]
```

### é…ç½®å‚æ•°è¯´æ˜

| å‚æ•°åç§° | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|
| `max_connections` | 100 | è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ€»æ•° |
| `max_conns_per_host` | 10 | æ¯ä¸ªä¸»æœºå…è®¸çš„æœ€å¤§è¿æ¥æ•° |
| `max_idle_conns` | 20 | è¿æ¥æ± ä¸­ä¿æŒçš„æœ€å¤§ç©ºé—²è¿æ¥æ•° |
| `conn_timeout` | 30 | å•æ¬¡è¿æ¥å»ºç«‹çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |
| `idle_timeout` | 60 | è¿æ¥ç©ºé—²è¶…è¿‡æ­¤æ—¶é—´åä¼šè¢«å…³é—­ï¼ˆç§’ï¼‰ |
| `max_lifetime` | 300 | è¿æ¥çš„æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼ˆç§’ï¼‰ |
| `test_timeout` | 10 | è¿æ¥å¥åº·æ£€æŸ¥çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |
| `health_check_interval` | 30 | å¥åº·æ£€æŸ¥çš„æ‰§è¡Œé—´éš”ï¼ˆç§’ï¼‰ |
| `cleanup_interval` | 60 | è¿æ¥æ¸…ç†ä»»åŠ¡çš„æ‰§è¡Œé—´éš”ï¼ˆç§’ï¼‰ |
| `blacklist_check_interval` | 300 | é»‘åå•æ£€æŸ¥çš„æ‰§è¡Œé—´éš”ï¼ˆç§’ï¼‰ |
| `dns_update_interval` | 1800 | DNSè§£æç»“æœæ›´æ–°çš„é—´éš”ï¼ˆç§’ï¼‰ |
| `max_retries` | 3 | è¯·æ±‚å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•° |

### è‡ªå®šä¹‰é…ç½®ç¤ºä¾‹

```go
// åˆ›å»ºè‡ªå®šä¹‰é…ç½®
config := &utlsclient.PoolConfig{
    MaxConnections:         50,
    MaxConnsPerHost:        5,
    ConnTimeout:            20 * time.Second,
    HealthCheckInterval:    60 * time.Second,
    DNSUpdateInterval:      600 * time.Second,
}

// ä½¿ç”¨è‡ªå®šä¹‰é…ç½®åˆ›å»ºè¿æ¥æ± 
pool := utlsclient.NewUTLSHotConnPool(config)
```

**ç« èŠ‚æ¥æº**
- [config/config.toml](file://config/config.toml#L1-L38)
- [utlsclient/utlshotconnpool.go](file://utlsclient/utlshotconnpool.go#L186-L200)

## å¸¸è§é—®é¢˜è§£å†³

### 1. ä¾èµ–ä¸‹è½½å¤±è´¥

**é—®é¢˜æè¿°**: `go mod download` æ‰§è¡Œå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†æ¨¡å—ç¼“å­˜
go clean -modcache

# é‡æ–°ä¸‹è½½ä¾èµ–
go mod download

# å¦‚æœä»ç„¶å¤±è´¥ï¼Œå°è¯•è®¾ç½®ä»£ç†
export GOPROXY=https://proxy.golang.org,direct
go mod download
```

### 2. ç¼–è¯‘é”™è¯¯

**é—®é¢˜æè¿°**: ç¼–è¯‘æ—¶å‡ºç°å¯¼å…¥è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿é¡¹ç›®åœ¨ GOPATH ä¸­
mkdir -p $GOPATH/src/github.com/yourusername
mv crawler-platform $GOPATH/src/github.com/yourusername/

# æˆ–è€…ä½¿ç”¨ go mod tidy æ•´ç†ä¾èµ–
go mod tidy
```

### 3. TLS è¿æ¥å¤±è´¥

**é—®é¢˜æè¿°**: è·å–è¿æ¥æ—¶å‡ºç° TLS æ¡æ‰‹é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```go
// æ£€æŸ¥ç½‘ç»œè¿æ¥
// ç¡®ä¿ç›®æ ‡åŸŸåå¯ä»¥æ­£å¸¸è§£æ
// æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
// éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§
```

### 4. æ€§èƒ½é—®é¢˜

**é—®é¢˜æè¿°**: è¯·æ±‚å“åº”é€Ÿåº¦æ…¢

**è§£å†³æ–¹æ¡ˆ**:
```go
// ä¼˜åŒ–é…ç½®å‚æ•°
config := &utlsclient.PoolConfig{
    MaxConnections:    200,        // å¢åŠ æœ€å¤§è¿æ¥æ•°
    ConnTimeout:       15 * time.Second,  // å‡å°‘è¿æ¥è¶…æ—¶
    MaxRetries:        2,          // å‡å°‘é‡è¯•æ¬¡æ•°
}

// ä½¿ç”¨è¿æ¥æ± é¢„çƒ­
for _, ip := range ipList {
    conn, err := pool.GetConnectionToIP(url, ip)
    if err == nil {
        client.Do(req)
        pool.PutConnection(conn)
    }
}
```

### 5. å†…å­˜æ³„æ¼

**é—®é¢˜æè¿°**: é•¿æ—¶é—´è¿è¡Œåå†…å­˜å ç”¨è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**:
```go
// ç¡®ä¿æ­£ç¡®å½’è¿˜è¿æ¥
defer pool.PutConnection(conn)

// å®šæœŸæ¸…ç†è¿‡æœŸè¿æ¥
stats := pool.GetStats()
if stats.TotalConnections > config.MaxConnections * 2 {
    // è§¦å‘æ¸…ç†æœºåˆ¶
}
```

**ç« èŠ‚æ¥æº**
- [utlsclient/constants.go](file://utlsclient/constants.go#L47-L86)

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. è¿æ¥æ± é…ç½®ä¼˜åŒ–

æ ¹æ®å®é™…ä½¿ç”¨åœºæ™¯è°ƒæ•´è¿æ¥æ± å‚æ•°ï¼š

```go
// é«˜å¹¶å‘åœºæ™¯é…ç½®
config := &utlsclient.PoolConfig{
    MaxConnections:         500,      // å¢åŠ æœ€å¤§è¿æ¥æ•°
    MaxConnsPerHost:        20,       // å¢åŠ æ¯ä¸ªä¸»æœºçš„è¿æ¥æ•°
    ConnTimeout:            10 * time.Second,  // å‡å°‘è¿æ¥è¶…æ—¶
    HealthCheckInterval:    15 * time.Second,  // å¢åŠ å¥åº·æ£€æŸ¥é¢‘ç‡
    MaxRetries:             1,        // å‡å°‘é‡è¯•æ¬¡æ•°
}
```

### 2. é¢„çƒ­ç­–ç•¥

åœ¨å¼€å§‹å¤§è§„æ¨¡è¯·æ±‚å‰é¢„çƒ­è¿æ¥æ± ï¼š

```go
// é¢„çƒ­è¿æ¥æ± 
for _, host := range hosts {
    for i := 0; i < config.MaxConnsPerHost; i++ {
        conn, err := pool.GetConnection(host)
        if err == nil {
            // å‘é€ç®€å•çš„å¥åº·æ£€æŸ¥è¯·æ±‚
            client := utlsclient.NewUTLSClient(conn)
            client.Get("https://" + host + "/health")
            pool.PutConnection(conn)
        }
    }
}
```

### 3. å¹¶å‘æ§åˆ¶

åˆç†æ§åˆ¶å¹¶å‘æ•°é¿å…å¯¹ç›®æ ‡æœåŠ¡å™¨é€ æˆè¿‡å¤§å‹åŠ›ï¼š

```go
// ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶å¹¶å‘
semaphore := make(chan struct{}, 10) // æœ€å¤§10ä¸ªå¹¶å‘

for i := 0; i < totalRequests; i++ {
    semaphore <- struct{}{} // è·å–è®¸å¯
    go func() {
        defer func() { <-semaphore }() // é‡Šæ”¾è®¸å¯
        
        // æ‰§è¡Œè¯·æ±‚
        conn, _ := pool.GetConnection(host)
        defer pool.PutConnection(conn)
        
        client := utlsclient.NewUTLSClient(conn)
        client.Do(req)
    }()
}
```

### 4. ç›‘æ§å’Œç»Ÿè®¡

å®šæœŸç›‘æ§è¿æ¥æ± çŠ¶æ€ï¼š

```go
// å®šæœŸæ£€æŸ¥è¿æ¥æ± çŠ¶æ€
ticker := time.NewTicker(5 * time.Minute)
go func() {
    for range ticker.C {
        stats := pool.GetStats()
        fmt.Printf("è¿æ¥æ± ç»Ÿè®¡: æ€»è¿æ¥æ•°=%d, å¥åº·è¿æ¥=%d, æˆåŠŸç‡=%.2f%%\n",
            stats.TotalConnections, stats.HealthyConnections, stats.SuccessRate*100)
    }
}()
```

### 5. é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

```go
// æ™ºèƒ½é‡è¯•æœºåˆ¶
func sendRequestWithRetry(client *utlsclient.UTLSClient, req *http.Request, maxRetries int) (*http.Response, error) {
    var lastErr error
    
    for i := 0; i <= maxRetries; i++ {
        if i > 0 {
            // æŒ‡æ•°é€€é¿
            time.Sleep(time.Duration(i*i) * time.Second)
        }
        
        resp, err := client.Do(req)
        if err == nil {
            return resp, nil
        }
        
        lastErr = err
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•
        if utlsclient.IsConnectionError(err) {
            continue
        }
        
        break
    }
    
    return nil, fmt.Errorf("è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°: %w", lastErr)
}
```

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L250-L292)
- [utlsclient/utlsclient.go](file://utlsclient/utlsclient.go#L80-L119)

## æ€»ç»“

é€šè¿‡æœ¬å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼Œæ‚¨å·²ç»å­¦ä¼šäº†ï¼š

1. **ç¯å¢ƒå‡†å¤‡**: å®‰è£… Go 1.25+ å’Œé¡¹ç›®ä¾èµ–
2. **é¡¹ç›®æ„å»º**: å…‹éš†é¡¹ç›®å¹¶æˆåŠŸç¼–è¯‘
3. **åŸºç¡€ä½¿ç”¨**: åˆ›å»ºè¿æ¥æ± ã€è·å–è¿æ¥ã€å‘é€è¯·æ±‚
4. **å®Œæ•´ç¤ºä¾‹**: ä»é…ç½®åŠ è½½åˆ°è¯·æ±‚å‘é€çš„å®Œæ•´æµç¨‹
5. **é…ç½®ç®¡ç†**: ç†è§£å’Œè‡ªå®šä¹‰è¿æ¥æ± é…ç½®
6. **é—®é¢˜è§£å†³**: å¸¸è§é—®é¢˜çš„è¯Šæ–­å’Œè§£å†³æ–¹æ¡ˆ
7. **æ€§èƒ½ä¼˜åŒ–**: æå‡æ€§èƒ½çš„æœ€ä½³å®è·µ

ç°åœ¨æ‚¨å¯ä»¥å°è¯•è¿è¡Œç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œåœ¨ 5 åˆ†é’Ÿå†…ä½“éªŒè¿™ä¸ªé«˜æ€§èƒ½çˆ¬è™«å¹³å°çš„å¼ºå¤§åŠŸèƒ½ï¼

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L295-L357)