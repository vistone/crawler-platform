<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>爬虫任务管理系统 - Crawler Task Manager</title>
    <meta name="description" content="高性能爬虫任务管理与调度平台，支持任务创建、监控、调度和可视化管理">
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js 库 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- 侧边栏导航 -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                <span class="logo-text">Crawler Manager</span>
            </div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item active" data-page="dashboard">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2" />
                    <rect x="14" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2" />
                    <rect x="14" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2" />
                    <rect x="3" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2" />
                </svg>
                <span>仪表板</span>
            </li>
            <li class="nav-item" data-page="tasks">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path
                        d="M21 12V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>任务管理</span>
            </li>
            <li class="nav-item" data-page="monitor">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 3V16C3 17.1046 3.89543 18 5 18H16M21 21L16 16M16 7V16H7" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>实时监控</span>
            </li>
            <li class="nav-item" data-page="logs">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M8 13H16M8 17H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                <span>执行日志</span>
            </li>
            <li class="nav-item" data-page="settings">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" />
                    <path
                        d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <span>系统设置</span>
            </li>
        </ul>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">A</div>
                <div class="user-details">
                    <div class="user-name">Admin</div>
                    <div class="user-role">管理员</div>
                </div>
                <button class="logout-btn" onclick="logout()">退出登录</button>
            </div>
        </div>
    </nav>

    <!-- 主内容区域 -->
    <main class="main-content">
        <!-- 顶部栏 -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="menu-toggle" id="menuToggle">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" />
                    </svg>
                </button>
                <h1 class="page-title" id="pageTitle">仪表板</h1>
            </div>
            <div class="topbar-right">
                <div class="search-box">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
                        <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <input type="text" placeholder="搜索任务..." class="search-input">
                </div>
                <button class="notification-btn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="notification-badge">3</span>
                </button>
            </div>
        </header>

        <!-- 页面内容容器 -->
        <div class="content-container">
            <!-- 仪表板页面 -->
            <div class="page-content active" id="dashboard-page">
                <!-- 统计卡片 -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-primary">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                                <path
                                    d="M21 12V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">总任务数</div>
                            <div class="stat-value">1,247</div>
                            <div class="stat-change positive">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 19V5M5 12L12 5L19 12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span>12.5% 较上周</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon stat-icon-success">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                                <path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">运行中</div>
                            <div class="stat-value">156</div>
                            <div class="stat-change positive">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 19V5M5 12L12 5L19 12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span>8.2% 较上周</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon stat-icon-warning">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">失败任务</div>
                            <div class="stat-value">23</div>
                            <div class="stat-change negative">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 5V19M19 12L12 19L5 12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span>3.1% 较上周</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon stat-icon-info">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">成功率</div>
                            <div class="stat-value">98.2%</div>
                            <div class="stat-change positive">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 19V5M5 12L12 5L19 12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span>1.3% 较上周</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 图表和任务列表 -->
                <div class="dashboard-grid">
                    <!-- 任务执行趋势图 -->
                    <div class="card chart-card">
                        <div class="card-header">
                            <h2 class="card-title">任务执行趋势</h2>
                            <div class="card-actions">
                                <select class="time-range-select">
                                    <option>最近7天</option>
                                    <option>最近30天</option>
                                    <option>最近90天</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="taskTrendChart"></canvas>
                        </div>
                    </div>

                    <!-- 任务状态分布 -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">任务状态分布</h2>
                        </div>
                        <div class="card-body">
                            <canvas id="taskStatusChart"></canvas>
                        </div>
                    </div>

                    <!-- 最近任务 -->
                    <div class="card recent-tasks-card">
                        <div class="card-header">
                            <h2 class="card-title">最近任务</h2>
                            <a href="#" class="view-all-link">查看全部</a>
                        </div>
                        <div class="card-body">
                            <div class="task-list">
                                <div class="task-item">
                                    <div class="task-info">
                                        <div class="task-name">Google Earth 数据采集</div>
                                        <div class="task-meta">
                                            <span class="task-time">2分钟前</span>
                                            <span class="task-type">HTTP</span>
                                        </div>
                                    </div>
                                    <span class="task-status status-running">运行中</span>
                                </div>
                                <div class="task-item">
                                    <div class="task-info">
                                        <div class="task-name">地形数据解析任务</div>
                                        <div class="task-meta">
                                            <span class="task-time">5分钟前</span>
                                            <span class="task-type">Custom</span>
                                        </div>
                                    </div>
                                    <span class="task-status status-completed">已完成</span>
                                </div>
                                <div class="task-item">
                                    <div class="task-info">
                                        <div class="task-name">四叉树数据爬取</div>
                                        <div class="task-meta">
                                            <span class="task-time">10分钟前</span>
                                            <span class="task-type">Google Earth</span>
                                        </div>
                                    </div>
                                    <span class="task-status status-completed">已完成</span>
                                </div>
                                <div class="task-item">
                                    <div class="task-info">
                                        <div class="task-name">批量URL采集</div>
                                        <div class="task-meta">
                                            <span class="task-time">15分钟前</span>
                                            <span class="task-type">HTTP</span>
                                        </div>
                                    </div>
                                    <span class="task-status status-failed">失败</span>
                                </div>
                                <div class="task-item">
                                    <div class="task-info">
                                        <div class="task-name">定时数据同步</div>
                                        <div class="task-meta">
                                            <span class="task-time">20分钟前</span>
                                            <span class="task-type">HTTP</span>
                                        </div>
                                    </div>
                                    <span class="task-status status-completed">已完成</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 系统资源监控 -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">系统资源</h2>
                        </div>
                        <div class="card-body">
                            <div class="resource-monitor">
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>Worker 使用率</span>
                                        <span class="resource-value">7/10</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 70%"></div>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>连接池使用率</span>
                                        <span class="resource-value">1245/1631</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 76%"></div>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>队列长度</span>
                                        <span class="resource-value">45/1000</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 4.5%"></div>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>内存使用</span>
                                        <span class="resource-value">2.3GB/8GB</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 28.75%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 任务管理页面 -->
            <div class="page-content" id="tasks-page">
                <div class="page-header">
                    <button class="btn btn-primary" id="createTaskBtn">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        创建任务
                    </button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">任务列表</h2>
                        <div class="filter-group">
                            <select class="filter-select">
                                <option>全部状态</option>
                                <option>运行中</option>
                                <option>已完成</option>
                                <option>失败</option>
                                <option>等待中</option>
                            </select>
                            <select class="filter-select">
                                <option>全部类型</option>
                                <option>HTTP</option>
                                <option>Google Earth</option>
                                <option>Custom</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>任务名称</th>
                                        <th>类型</th>
                                        <th>状态</th>
                                        <th>优先级</th>
                                        <th>调度</th>
                                        <th>最后执行</th>
                                        <th>成功率</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="taskTableBody">
                                    <!-- 任务数据将通过 JavaScript 动态填充 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 监控页面 -->
            <div class="page-content" id="monitor-page">
                <!-- 系统状态概览 -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-success">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Worker 状态</div>
                            <div class="stat-value" id="workerStatus">运行中</div>
                            <div class="stat-change positive">
                                <span id="workerUptime">运行时长: 计算中...</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon stat-icon-primary">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">连接池状态</div>
                            <div class="stat-value" id="poolConnections">0/100</div>
                            <div class="stat-change">
                                <span id="poolHealth">健康度: 100%</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon stat-icon-warning">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor"
                                    stroke-width="2" />
                                <path d="M9 9H15M9 13H15" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">队列长度</div>
                            <div class="stat-value" id="queueLength">0</div>
                            <div class="stat-change">
                                <span id="queueStatus">空闲</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon stat-icon-info">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                                    stroke="currentColor" stroke-width="2" />
                                <path d="M12 16V12M12 8H12.01" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Redis 状态</div>
                            <div class="stat-value" id="redisStatus">已连接</div>
                            <div class="stat-change positive">
                                <span id="redisPing">延迟: < 1ms</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 实时任务流 -->
                <div class="dashboard-grid monitor-grid">
                    <div class="card" style="grid-column: 1 / -1;">
                        <div class="card-header">
                            <h2 class="card-title">实时任务流</h2>
                            <div class="card-actions">
                                <button class="btn btn-secondary btn-sm" onclick="refreshMonitor()">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                                        style="width: 16px; height: 16px;">
                                        <path d="M1 4V10H7M23 20V14H17" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                        <path
                                            d="M20.49 9C19.9828 7.56678 19.1209 6.28536 17.9845 5.27542C16.8482 4.26548 15.4745 3.55976 13.9917 3.22426C12.5089 2.88875 10.9652 2.93434 9.50481 3.35677C8.04437 3.77921 6.71475 4.56471 5.64 5.64L1 10M23 14L18.36 18.36C17.2853 19.4353 15.9556 20.2208 14.4952 20.6432C13.0348 21.0657 11.4911 21.1112 10.0083 20.7757C8.52547 20.4402 7.1518 19.7345 6.01547 18.7246C4.87913 17.7146 4.01717 16.4332 3.51 15"
                                            stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                    刷新
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="taskStreamContainer" style="max-height: 400px; overflow-y: auto;">
                                <div class="task-list" id="taskStream">
                                    <div style="text-align: center; padding: 40px; color: #9ca3af;">
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                                            style="width: 48px; height: 48px; margin: 0 auto 16px; opacity: 0.5;">
                                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                        <div>等待任务数据...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 性能指标 -->
                    <div class="card performance-card">
                        <div class="card-header">
                            <h2 class="card-title">性能指标</h2>
                        </div>
                        <div class="card-body">
                            <div class="resource-monitor">
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>平均响应时间</span>
                                        <span class="resource-value" id="avgResponseTime">0ms</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="avgResponseBar" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>请求成功率</span>
                                        <span class="resource-value" id="successRate">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="successRateBar"
                                            style="width: 0%; background: #10b981;"></div>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>连接复用率</span>
                                        <span class="resource-value" id="connReuseRate">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="connReuseBar"
                                            style="width: 0%; background: #3b82f6;"></div>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-label">
                                        <span>TLS 指纹多样性</span>
                                        <span class="resource-value" id="fingerprintDiversity">33种</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 100%; background: #8b5cf6;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 连接池状态 -->
                    <div class="card pool-card">
                        <div class="card-header">
                            <h2 class="card-title">连接池状态</h2>
                            <button class="btn btn-secondary btn-sm" onclick="refreshPoolStats()">刷新</button>
                        </div>
                        <div class="card-body">
                            <div class="pool-stats">
                                <div class="pool-stat-row">
                                    <span>总连接数</span>
                                    <strong id="poolTotal">0</strong>
                                </div>
                                <div class="pool-stat-row">
                                    <span>活跃 / 空闲</span>
                                    <strong><span id="poolActive">0</span> / <span id="poolIdle">0</span></strong>
                                </div>
                                <div class="pool-stat-row">
                                    <span>健康连接</span>
                                    <strong id="poolHealthy">0</strong>
                                </div>
                                <div class="pool-stat-row">
                                    <span>成功率</span>
                                    <strong id="poolSuccessRate">0%</strong>
                                </div>
                                <div class="pool-stat-row">
                                    <span>连接复用率</span>
                                    <strong id="poolReuseRate">0%</strong>
                                </div>
                                <div class="pool-stat-row">
                                    <span>白名单 / 黑名单</span>
                                    <strong><span id="poolWhitelist">0</span> / <span id="poolBlacklist">0</span></strong>
                                </div>
                                <div class="pool-stat-row">
                                    <span>最后更新时间</span>
                                    <strong id="poolUpdated">-</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 系统日志 -->
                    <div class="card logs-card">
                        <div class="card-header">
                            <h2 class="card-title">系统日志</h2>
                        </div>
                        <div class="card-body">
                            <div id="systemLogs"
                                style="font-family: 'Courier New', monospace; font-size: 12px; max-height: 300px; overflow-y: auto; background: #f9fafb; padding: 12px; border-radius: 6px;">
                                <div style="color: #10b981;">[INFO] Worker 已启动</div>
                                <div style="color: #3b82f6;">[INFO] Redis 连接成功</div>
                                <div style="color: #3b82f6;">[INFO] 连接池初始化完成</div>
                                <div style="color: #9ca3af;">[DEBUG] 等待任务...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 日志页面 -->
            <div class="page-content" id="logs-page">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">执行日志</h2>
                        <div class="card-actions">
                            <select class="filter-select" id="logLevelFilter">
                                <option value="all">全部级别</option>
                                <option value="info">INFO</option>
                                <option value="debug">DEBUG</option>
                                <option value="warn">WARN</option>
                                <option value="error">ERROR</option>
                            </select>
                            <button class="btn btn-secondary btn-sm" onclick="clearLogs()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                                    style="width: 16px; height: 16px;">
                                    <path
                                        d="M3 6H5H21M8 6V4C8 3.44772 8.44772 3 9 3H15C15.5523 3 16 3.44772 16 4V6M19 6V20C19 20.5523 18.5523 21 18 21H6C5.44772 21 5 20.5523 5 20V6H19Z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                                清空日志
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="refreshLogs()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                                    style="width: 16px; height: 16px;">
                                    <path d="M1 4V10H7M23 20V14H17" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <path
                                        d="M20.49 9C19.9828 7.56678 19.1209 6.28536 17.9845 5.27542C16.8482 4.26548 15.4745 3.55976 13.9917 3.22426C12.5089 2.88875 10.9652 2.93434 9.50481 3.35677C8.04437 3.77921 6.71475 4.56471 5.64 5.64L1 10M23 14L18.36 18.36C17.2853 19.4353 15.9556 20.2208 14.4952 20.6432C13.0348 21.0657 11.4911 21.1112 10.0083 20.7757C8.52547 20.4402 7.1518 19.7345 6.01547 18.7246C4.87913 17.7146 4.01717 16.4332 3.51 15"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                                刷新
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="logContainer"
                            style="font-family: 'Courier New', monospace; font-size: 13px; max-height: 600px; overflow-y: auto; background: #1e1e1e; color: #d4d4d4; padding: 16px; border-radius: 8px;">
                            <!-- 日志内容将通过 JavaScript 动态填充 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设置页面 -->
            <div class="page-content" id="settings-page">
                <!-- 系统配置 -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">系统配置</h2>
                    </div>
                    <div class="card-body">
                        <form id="systemConfigForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="maxWorkers">最大 Worker 数量</label>
                                    <input type="number" id="maxWorkers" class="form-input" value="10" min="1"
                                        max="100">
                                    <small class="form-hint">同时运行的最大工作线程数</small>
                                </div>
                                <div class="form-group">
                                    <label for="maxConnections">最大连接数</label>
                                    <input type="number" id="maxConnections" class="form-input" value="100" min="10"
                                        max="1000">
                                    <small class="form-hint">连接池最大连接数</small>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="requestTimeout">请求超时 (秒)</label>
                                    <input type="number" id="requestTimeout" class="form-input" value="30" min="5"
                                        max="300">
                                </div>
                                <div class="form-group">
                                    <label for="retryCount">重试次数</label>
                                    <input type="number" id="retryCount" class="form-input" value="3" min="0" max="10">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="redisAddr">Redis 地址</label>
                                <input type="text" id="redisAddr" class="form-input" value="localhost:6379"
                                    placeholder="host:port">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="enableCache" checked>
                                    启用 Redis 缓存
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="enableAsyncPersist" checked>
                                    启用异步持久化
                                </label>
                            </div>
                            <button type="submit" class="btn btn-primary">保存配置</button>
                        </form>
                    </div>
                </div>

                <!-- 用户管理 -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <h2 class="card-title">用户管理</h2>
                        <button class="btn btn-primary btn-sm" onclick="showAddUserModal()">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                                style="width: 16px; height: 16px;">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                            添加用户
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>用户名</th>
                                        <th>角色</th>
                                        <th>邮箱</th>
                                        <th>状态</th>
                                        <th>最后登录</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="userTableBody">
                                    <tr>
                                        <td>
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <div class="user-avatar"
                                                    style="width: 32px; height: 32px; font-size: 14px;">A</div>
                                                <span style="font-weight: 500;">admin</span>
                                            </div>
                                        </td>
                                        <td><span class="task-type">管理员</span></td>
                                        <td>admin@example.com</td>
                                        <td><span class="task-status status-running">活跃</span></td>
                                        <td>刚刚</td>
                                        <td>
                                            <div style="display: flex; gap: 8px;">
                                                <button class="action-btn" title="编辑" onclick="showEditUserModal('admin', 'admin@example.com', 'admin', true)">
                                                    <svg viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13"
                                                            stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round" />
                                                        <path
                                                            d="M18.5 2.50023C18.8978 2.1024 19.4374 1.87891 20 1.87891C20.5626 1.87891 21.1022 2.1024 21.5 2.50023C21.8978 2.89805 22.1213 3.43762 22.1213 4.00023C22.1213 4.56284 21.8978 5.1024 21.5 5.50023L12 15.0002L8 16.0002L9 12.0002L18.5 2.50023Z"
                                                            stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round" />
                                                    </svg>
                                                </button>
                                                <button class="action-btn" title="删除" disabled>
                                                    <svg viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M3 6H5H21M8 6V4C8 3.44772 8.44772 3 9 3H15C15.5523 3 16 3.44772 16 4V6M19 6V20C19 20.5523 18.5523 21 18 21H6C5.44772 21 5 20.5523 5 20V6H19Z"
                                                            stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round" />
                                                    </svg>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- TLS 指纹配置 -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <h2 class="card-title">TLS 指纹配置</h2>
                    </div>
                    <div class="card-body">
                        <p style="color: #6b7280; margin-bottom: 16px;">当前支持 33 种 TLS 指纹，包括 Chrome、Firefox、Safari、Edge
                            等主流浏览器</p>
                        <div class="resource-monitor">
                            <div class="resource-item">
                                <div class="resource-label">
                                    <span>Chrome 系列</span>
                                    <span class="resource-value">12 种</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 36%; background: #10b981;"></div>
                                </div>
                            </div>
                            <div class="resource-item">
                                <div class="resource-label">
                                    <span>Firefox 系列</span>
                                    <span class="resource-value">9 种</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 27%; background: #f59e0b;"></div>
                                </div>
                            </div>
                            <div class="resource-item">
                                <div class="resource-label">
                                    <span>Safari 系列</span>
                                    <span class="resource-value">4 种</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 12%; background: #3b82f6;"></div>
                                </div>
                            </div>
                            <div class="resource-item">
                                <div class="resource-label">
                                    <span>Edge 系列</span>
                                    <span class="resource-value">3 种</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 9%; background: #8b5cf6;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- IP 管理 -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">IP 管理</h2>
                        <div class="card-actions">
                            <button class="btn btn-secondary btn-sm" onclick="refreshIPData()">刷新全部</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="tab-nav" id="ipTabs">
                            <button data-tab="local" class="tab-button active">本地 IP 池</button>
                            <button data-tab="whitelist" class="tab-button">白名单</button>
                            <button data-tab="blacklist" class="tab-button">黑名单</button>
                            <button data-tab="settings" class="tab-button">策略配置</button>
                        </div>

                        <div class="tab-content active" id="ip-tab-local">
                            <form id="addLocalIPForm" class="inline-form">
                                <input type="text" id="localIPInput" class="form-input" placeholder="输入 IP 地址，如 1.1.1.1 或 2404:6800::" required>
                                <input type="text" id="localIPSource" class="form-input" placeholder="来源（可选）">
                                <button type="submit" class="btn btn-primary">添加</button>
                            </form>
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>IP 地址</th>
                                            <th>类型</th>
                                            <th>来源</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="localIPTableBody">
                                        <tr>
                                            <td colspan="5" class="placeholder-cell">暂无数据</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="tab-content" id="ip-tab-whitelist">
                            <form id="addWhitelistForm" class="inline-form">
                                <input type="text" id="whitelistInput" class="form-input" placeholder="输入要加入白名单的 IP" required>
                                <button type="submit" class="btn btn-primary">添加</button>
                            </form>
                            <div class="tag-list" id="whitelistContainer"></div>
                        </div>

                        <div class="tab-content" id="ip-tab-blacklist">
                            <form id="addBlacklistForm" class="inline-form">
                                <input type="text" id="blacklistInput" class="form-input" placeholder="输入要加入黑名单的 IP" required>
                                <button type="submit" class="btn btn-primary btn-danger">拉黑</button>
                            </form>
                            <div class="tag-list" id="blacklistContainer"></div>
                        </div>

                        <div class="tab-content" id="ip-tab-settings">
                            <form id="ipSettingsForm" class="form-grid">
                                <div class="form-group">
                                    <label for="preheatConnections">预热连接数</label>
                                    <input type="number" id="preheatConnections" class="form-input" min="1" value="32">
                                </div>
                                <div class="form-group">
                                    <label for="maxFailures">最大失败次数</label>
                                    <input type="number" id="maxFailures" class="form-input" min="1" value="3">
                                </div>
                                <div class="form-group">
                                    <label for="rotateIntervalSeconds">轮换间隔 (秒)</label>
                                    <input type="number" id="rotateIntervalSeconds" class="form-input" min="10" value="60">
                                </div>
                                <div class="form-group">
                                    <label for="autoRecoverSeconds">自动恢复 (秒)</label>
                                    <input type="number" id="autoRecoverSeconds" class="form-input" min="60" value="300">
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">保存策略</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- 编辑用户模态框（设置页面） -->
    <div class="modal" id="editUserModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">编辑用户</h2>
                <button class="modal-close" onclick="closeEditUserModal()">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label for="editUserUsername">用户名</label>
                        <input type="text" id="editUserUsername" class="form-input" placeholder="输入用户名" required>
                    </div>
                    <div class="form-group">
                        <label for="editUserEmail">邮箱</label>
                        <input type="email" id="editUserEmail" class="form-input" placeholder="输入邮箱地址" required>
                    </div>
                    <div class="form-group">
                        <label for="editUserRole">角色</label>
                        <select id="editUserRole" class="form-input" required>
                            <option value="admin">管理员</option>
                            <option value="user">普通用户</option>
                            <option value="viewer">查看者</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="editUserStatus" checked>
                            账户状态：活跃
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeEditUserModal()">取消</button>
                <button type="submit" form="editUserForm" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>

    <!-- 创建任务模态框 -->
    <div class="modal" id="createTaskModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">创建新任务</h2>
                <button class="modal-close" id="closeModalBtn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="createTaskForm">
                    <div class="form-group">
                        <label for="taskName">任务名称</label>
                        <input type="text" id="taskName" class="form-input" placeholder="输入任务名称" required>
                    </div>
                    <div class="form-group">
                        <label for="taskType">任务类型</label>
                        <select id="taskType" class="form-input" required>
                            <option value="">选择任务类型</option>
                            <option value="http">HTTP 请求</option>
                            <option value="google_earth">Google Earth 数据</option>
                            <option value="custom">自定义任务</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskUrl">目标 URL</label>
                        <input type="url" id="taskUrl" class="form-input" placeholder="https://example.com" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskPriority">优先级</label>
                            <select id="taskPriority" class="form-input">
                                <option value="1">低</option>
                                <option value="5" selected>中</option>
                                <option value="10">高</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="taskTimeout">超时时间 (秒)</label>
                            <input type="number" id="taskTimeout" class="form-input" value="30" min="1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="taskSchedule">调度类型</label>
                        <select id="taskSchedule" class="form-input">
                            <option value="once">一次性</option>
                            <option value="cron">定时任务 (Cron)</option>
                            <option value="interval">间隔执行</option>
                        </select>
                    </div>
                    <div class="form-group" id="cronExpressionGroup" style="display: none;">
                        <label for="cronExpression">Cron 表达式</label>
                        <input type="text" id="cronExpression" class="form-input" placeholder="0 */5 * * * *">
                        <small class="form-hint">示例: 0 */5 * * * * (每5分钟执行)</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelTaskBtn">取消</button>
                <button type="submit" form="createTaskForm" class="btn btn-primary">创建任务</button>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="index.js"></script>
    <script src="monitor.js"></script>
    <script src="logs.js"></script>
</body>

</html>
```